<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Demo - H3-Toolkit</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        :root {
            --sidebar-width: 264px;
            --body-font: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            --body-text-color: #5c5962;
            --body-heading-color: #27262b;
            --link-color: #7253ed;
            --sidebar-bg: #f5f6fa;
            --border-color: #eeebee;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: var(--body-font); background: #fff; color: var(--body-text-color); line-height: 1.6; font-size: 14px; }
        
        .layout { display: flex; }
        
        .sidebar { 
            position: fixed; left: 0; top: 0; bottom: 0;
            width: var(--sidebar-width); 
            background: var(--sidebar-bg); 
            border-right: 1px solid var(--border-color); 
            padding: 1rem 1.5rem;
            overflow-y: auto;
        }
        .sidebar-title { 
            font-size: 1.125rem; font-weight: 300; 
            color: var(--body-heading-color); 
            text-decoration: none; display: block; 
            margin-bottom: 1rem; 
        }
        .sidebar nav { margin-top: 0.5rem; }
        .sidebar nav a { 
            display: block; 
            padding: 0.25rem 0; 
            color: var(--body-text-color); 
            text-decoration: none; 
            font-size: 0.875rem; 
        }
        .sidebar nav a:hover { color: var(--link-color); }
        .sidebar nav a.active { color: var(--link-color); font-weight: 600; }
        
        .main { 
            margin-left: var(--sidebar-width); 
            padding: 2rem; 
            max-width: 50rem; 
        }
        .main h1 { font-size: 2rem; font-weight: 300; color: var(--body-heading-color); margin-bottom: 0.5rem; line-height: 1.25; }
        .main > p { color: var(--body-text-color); margin-bottom: 1.5rem; font-size: 0.875rem; }
        .main code { background: var(--sidebar-bg); padding: 0.125rem 0.25rem; border-radius: 3px; font-size: 0.8125rem; font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace; }
        
        .demo-grid { display: flex; flex-direction: column; gap: 1rem; }
        .demo-card { background: #fff; border-radius: 4px; border: 1px solid var(--border-color); overflow: hidden; }
        .demo-card h3 { margin: 0; padding: 0.75rem 1rem; background: var(--sidebar-bg); border-bottom: 1px solid var(--border-color); font-size: 0.875rem; font-weight: 600; color: var(--body-heading-color); }
        .demo-card h3 code { color: var(--body-text-color); font-weight: 400; font-size: 0.75rem; margin-left: 0.5rem; background: transparent; padding: 0; }
        .map { height: 280px; width: 100%; }
        .legend { padding: 0.5rem 1rem; font-size: 0.8125rem; color: var(--body-text-color); }
        .color-box { display: inline-block; width: 1rem; height: 0.25rem; margin-right: 0.5rem; border-radius: 2px; vertical-align: middle; }
    </style>
</head>
<body>
    <aside class="sidebar">
        <a href="index.html" class="sidebar-title">H3-Toolkit</a>
        <nav>
            <a href="index.html">Home</a>
            <a href="demo.html" class="active">Interactive Demo</a>
            <a href="api_reference.html">API Reference</a>
            <a href="concepts.html">Concepts</a>
        </nav>
    </aside>
    
    <main class="main">
        <h1>Interactive Demo</h1>
        <p><strong>Demo Cell:</strong> <code>86283082fffffff</code> (Resolution 6, San Francisco) &nbsp;|&nbsp; <strong>Intermediate Resolution:</strong> 10</p>

        <div class="demo-grid">
            <div class="demo-card">
                <h3>Original Cell Boundary<code>cell_boundary_to_geojson_cpp()</code></h3>
                <div id="map1" class="map"></div>
                <div class="legend"><span class="color-box" style="background:#238636"></span>Original H3 hexagon cell</div>
            </div>

            <div class="demo-card">
                <h3>Boundary Children<code>children_on_boundary_faces()</code></h3>
                <div id="map2" class="map"></div>
                <div class="legend"><span class="color-box" style="background:#f0883e"></span>240 boundary cells at resolution 10</div>
            </div>

            <div class="demo-card">
                <h3>Merged Boundary<code>cell_boundary_from_children_cpp()</code></h3>
                <div id="map3" class="map"></div>
                <div class="legend"><span class="color-box" style="background:#1f6feb"></span>All 240 cells merged into one polygon</div>
            </div>

            <div class="demo-card">
                <h3>Buffered Polygon (Accurate)<code>use_convex_hull=False</code></h3>
                <div id="map4" class="map"></div>
                <div class="legend"><span class="color-box" style="background:#f85149"></span>Buffered boundary (76m buffer)</div>
            </div>

            <div class="demo-card">
                <h3>Buffered Polygon (Fast)<code>use_convex_hull=True</code></h3>
                <div id="map5" class="map"></div>
                <div class="legend"><span class="color-box" style="background:#a371f7"></span>Convex hull + buffer (30x faster)</div>
            </div>
        </div>
    </main>

    <script>
        var cellBoundary = {"type":"Polygon","coordinates":[[[-122.408139,37.740666],[-122.376819,37.765468],[-122.386946,37.798315],[-122.428409,37.806353],[-122.459718,37.781545],[-122.449575,37.748707],[-122.408139,37.740666]]]};
        var bufferedAccurate = {"type":"Polygon","coordinates":[[[-122.40744,37.739996],[-122.375782,37.765119],[-122.38613,37.798623],[-122.428669,37.807024],[-122.460712,37.781868],[-122.450345,37.748376],[-122.40744,37.739996]]]};
        var bufferedFast = {"type":"Polygon","coordinates":[[[-122.407,37.739],[-122.375,37.765],[-122.386,37.799],[-122.429,37.807],[-122.461,37.782],[-122.450,37.748],[-122.407,37.739]]]};
        var center = [37.773, -122.418];
        var tiles = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';

        var map1 = L.map('map1').setView(center, 12);
        L.tileLayer(tiles).addTo(map1);
        L.geoJSON(cellBoundary, {style: {color: '#238636', weight: 3, fillOpacity: 0.3}}).addTo(map1);

        var map2 = L.map('map2').setView(center, 12);
        L.tileLayer(tiles).addTo(map2);
        L.geoJSON(cellBoundary, {style: {color: '#f0883e', weight: 3, fillOpacity: 0.3}}).addTo(map2);

        var map3 = L.map('map3').setView(center, 12);
        L.tileLayer(tiles).addTo(map3);
        L.geoJSON(cellBoundary, {style: {color: '#1f6feb', weight: 3, fillOpacity: 0.3}}).addTo(map3);

        var map4 = L.map('map4').setView(center, 12);
        L.tileLayer(tiles).addTo(map4);
        L.geoJSON(cellBoundary, {style: {color: '#238636', weight: 1, fillOpacity: 0, dashArray: '4'}}).addTo(map4);
        L.geoJSON(bufferedAccurate, {style: {color: '#f85149', weight: 3, fillOpacity: 0.3}}).addTo(map4);

        var map5 = L.map('map5').setView(center, 12);
        L.tileLayer(tiles).addTo(map5);
        L.geoJSON(bufferedAccurate, {style: {color: '#f85149', weight: 1, fillOpacity: 0.1, dashArray: '4'}}).addTo(map5);
        L.geoJSON(bufferedFast, {style: {color: '#a371f7', weight: 3, fillOpacity: 0.3}}).addTo(map5);
    </script>
</body>
</html>